name: ğŸ§  AI Analyst (Daily 6am)

on:
  schedule:
    - cron: '10 22 * * *'
  workflow_dispatch:

permissions:
  contents: write

jobs:
  ai-job:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ ä¸‹è½½ä»£ç 
        uses: actions/checkout@v3

      - name: ğŸ è®¾ç½® Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: ğŸ“¦ å®‰è£…ä¾èµ–
        run: pip install google-generativeai

      - name: ğŸ§  è¿è¡Œ AI åˆ†æ
        # â¬‡ï¸â¬‡ï¸â¬‡ï¸ å…³é”®ä¿®æ”¹ï¼šåœ¨è¿™é‡ŒæŠŠ 4 ä¸ª Secret ä¼ ç»™ç¯å¢ƒå˜é‡ â¬‡ï¸â¬‡ï¸â¬‡ï¸
        env:
          KEY_FINANCE: ${{ secrets.KEY_FINANCE }}
          KEY_GLOBAL: ${{ secrets.KEY_GLOBAL }}
          KEY_TECH: ${{ secrets.KEY_TECH }}
          KEY_GENERAL: ${{ secrets.KEY_GENERAL }}
          # ç•™ç€è¿™ä¸ªä½œä¸ºä¿åº•ï¼Œé˜²æ­¢æŸä¸ªKeyæ²¡è®¾ç½®
          GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
        run: python ai_editor.py

      - name: ğŸ’¾ ä¿å­˜æŠ¥å‘Š
        run: |
          git config --global user.name 'AI Analyst'
          git config --global user.email 'ai@bot.com'
          git add analysis_*.json
          git commit -m "ğŸ§  Auto-update: AI Report (Multi-Key)" || exit 0
          git push
