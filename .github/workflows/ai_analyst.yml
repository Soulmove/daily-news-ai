name: ğŸ§  AI Analyst (Daily 6am)

on:
  schedule:
    # åŒ—äº¬æ—¶é—´ 06:10 (UTC 22:10)
    # æ•…æ„æ¯”çˆ¬è™«æ™š10åˆ†é’Ÿï¼Œç¡®ä¿è¯»åˆ°æœ€æ–°æ•°æ®
    - cron: '10 22 * * *'
  workflow_dispatch:

permissions:
  contents: write

jobs:
  ai-job:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ ä¸‹è½½ä»£ç  (å«æœ€æ–°æ•°æ®)
        uses: actions/checkout@v3

      - name: ğŸ è®¾ç½® Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: ğŸ“¦ å®‰è£…ä¾èµ–
        run: pip install google-generativeai

      - name: ğŸ§  è¿è¡Œ AI åˆ†æ
        env:
          GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
        run: python ai_editor.py

      - name: ğŸ’¾ ä¿å­˜æŠ¥å‘Š
        run: |
          git config --global user.name 'AI Analyst'
          git config --global user.email 'ai@bot.com'
          git add analysis_*.json
          git commit -m "ğŸ§  Auto-update: AI Report" || exit 0
          git push
